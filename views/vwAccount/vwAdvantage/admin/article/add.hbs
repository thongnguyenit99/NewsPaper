{{#section 'js'}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script src="https://cdn.tinymce.com/4/tinymce.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.9/js/fileinput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.9/themes/fa/theme.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.9/js/locales/vi.min.js"></script>
<script>
    $('#images').fileinput({
        theme: 'fa',
        showCaption: true,
        dropZoneEnabled: true,
        allowedFileExtensions: ['png', 'jpg', 'gif'],
        language: 'vi',

    });
    tinymce.init({
        selector: '#content',
        height: 450,
        plugins: 'paste image link autolink lists table media',
        menubar: false,
        toolbar: [
            'undo redo | bold italic underline strikethrough | numlist bullist | alignleft aligncenter alignright | forecolor backcolor | table link image media',
        ],
    });
</script>
<script>
    $('#frmpostwriter').on('submit', function (e) {
        e.preventDefault();
        validate();
    })
    function validate() {
        const title = $('#title').val();
        const abstract = $('#abstract').val();
        const author = $('#author').val();
        const images = $('#images').val();
        const content = $('#content').val();
        const tag = $('#tag').val();
        const title_alias = $('#title_alias').val();
        if (title_alias == "") {
            alert("Đường dẫn bài viết không được trống.");
            return false;
        }
        if (title == "") {
            alert("Tiêu đễ không được rỗng.");
            return false;
        }
        if (title.length < 10) {
            alert("Tiêu đễ phải lớn hơn 10 kí tự");
            return false;
        }
        if (title.length > 200) {
            alert("Tiêu đề tối đa 200 ký tự.");
            return false;
        }
        if (abstract.length == "") {
            alert("Tóm tắt không được rỗng");
            return false;
        }
        if (abstract.length < 100) {
            alert("Tóm tắt phải từ 100 ký tự");
            return false;
        }
        if (abstract.length > 1000) {
            alert("Tóm tắt tối đa có 1000 ký tự");
            return false;
        }
        if (images == "" && "{{{row.images}}}" == "") {
            alert("Ảnh bìa không được rỗng.");
            return false;
        }
        if (content == "") {
            alert("Nội dung bài viết không được rỗng.");
            return false;
        }
        if (content.length < 500) {
            alert("Nội dung bài viết phải từ 500 ký tự.");
            return false;
        }
        if (content.length > 100000) {
            alert("Nội dung bài tối đa của bài viết là 100000 ký tự.");
            return false;
        }
        if (tag == "") {
            alert("Nhãn bài viết không được rỗng.");
            return false;
        }
        if (author == "") {
            alert("Tên tác giả không được rỗng.");
            return false;
        }
        if (tag.length < 30) {
            alert("Nhãn bài viết phải từ 30 ký tự.");
            return false;
        }
        if (tag.length > 400) {
            alert("Nhãn bài viết tối đa 400 ký tự.");
            return false;
        }
        $('#frmpostwriter').off('submit').submit();
    }

</script>

{{/section}}
{{#section 'css'}}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.9/css/fileinput.min.css">
{{/section}}
<h1 class="text-center">Thêm bài</h1>
<div class="container">
    <form id="frmpostwriter" method="post" enctype="multipart/form-data">
        <div class="form-group">
            {{!-- <input type="text" name="url_img" hidden /> --}}
        <input type="number" name="isActive" value="1" hidden />
          <input type="number" name="sts_id" value="4" hidden >
            <label style="font-weight: bold; font-size: 18px">Chuyên mục:</label>
            <select class="custom-select" name="c_ID" id="c_ID">
                <option value="1">Cổ phiếu top đầu</option>
                <option value="2">Xu hướng nhận định</option>
                <option value="3">Bất động sản</option>
                <option value="4">Doanh nghiệp niêm yết</option>
                <option value="5">Ngân hàng điện tử</option>
                <option value="6">Thương mại điện tử</option>
            </select>
        </div>
        <div class="form-group">
            <label style="font-weight: bold; font-size: 18px">Tiêu đề:</label>
            <input type="text" name="title" id="title" class="form-control" placeholder="Nhập tiêu đề">
        </div>
        <div class="form-group">
            <label style="font-weight: bold; font-size: 18px">Ảnh đại điện(bài viết):</label><br>
            <div class="file-loading">
                <input id="images" name="images" type="file" accept="image/*" multiple>
            </div>
        </div>
        <div class="form-group">
            <label style="font-weight: bold; font-size: 18px">Tóm tắt:</label>
            <textarea class="form-control" name="abstract" id="abstract" placeholder="Nhập nội dung"
                rows="5"></textarea>
        </div>
        <div class="form-group">
            <label style="font-weight: bold; font-size: 18px">Nội dung bài viết:</label>
            <textarea name="content" id="content" class="form-control" cols="30" rows="10"></textarea>
        </div>
        <div class="form-group">
            <label style=" font-weight:bold">Đường dẫn alias(đường dẫn vô bài viết)</label>
            <textarea class="form-control" name="title_alias" id="title_alias"
                placeholder="dai-dich-co-vid-19-bat-nguon-tu-trung-quoc--..." rows="2"></textarea>
        </div>
        <div class="form-group">
            <label style="font-weight: bold; font-size: 18px">Gắn nhãn bài viết:</label>
            <input value="" type="text" name="tag" id="tag" class="form-control" placeholder="vd: abc;bcd;cde;">
        </div>
        <div class="form-group">
            <label style="font-weight: bold; font-size: 18px">Tác giả:</label>
            <input type="text" name="author" id="author" class="form-control" placeholder="Nhập tên tác giả">
        </div>
        <a href="/admin/article" class="btn btn-success">
            <i class="fa fa-backward" aria-hidden="true"></i>
            Trở lại
        </a>
        <button type="submit" class="btn btn-primary">
            <i class="fa fa-check" aria-hidden="true"></i>
            Lưu lại
        </button>
</div>
</form>
</div>